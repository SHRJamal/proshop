(this["webpackJsonpproshop-react"]=this["webpackJsonpproshop-react"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(27),a=n.n(r),s=n(121),i=n(115),o=n(123),j=n(119),l=n(40),u=n(35),d=n(7),b=n.n(d),O=n(15),x=n(32),h=n(34),p=n.n(h),f=n(20),m=n(16),v=Object(f.combine)({user:null},(function(e){return{loginUser:function(t,n){return Object(O.a)(b.a.mark((function c(){var r,a,s,i,o;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r="",c.prev=1,c.next=4,p.a.post("/api/login",{email:t,password:n},{headers:{"Content-Type":"application/json"}});case 4:if(a=c.sent,null===(s=a.data)||void 0===s?void 0:s.token){c.next=8;break}throw new Error("Invalid Token");case 8:e((function(e){return Object(m.b)(e,(function(e){e.user=s}))})),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),r=(null===(i=c.t0.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||c.t0.message;case 14:return c.abrupt("return",r);case 15:case"end":return c.stop()}}),c,null,[[1,11]])})))()},registerUser:function(t,n,c){return Object(O.a)(b.a.mark((function r(){var a,s,i,o,j;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a="",r.prev=1,r.next=4,p.a.post("/api/signup",{username:t,email:n,password:c},{headers:{"Content-Type":"application/json"}});case 4:if(s=r.sent,null===(i=s.data)||void 0===i?void 0:i.token){r.next=8;break}throw new Error("Invalid Token");case 8:e((function(e){return Object(m.b)(e,(function(e){e.user=i}))})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),a=(null===(o=r.t0.response)||void 0===o||null===(j=o.data)||void 0===j?void 0:j.message)||r.t0.message;case 14:return r.abrupt("return",a);case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},logout:function(){return Object(O.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(e){return Object(u.a)(Object(u.a)({},e),{},{user:null})}));case 1:case"end":return t.stop()}}),t)})))()}}}));v=Object(f.devtools)(v,"UserStore"),"undefined"!=typeof window&&(v=Object(f.persist)(v,{name:"user"}));var g=Object(x.a)(v),k=n(1);function w(){var e=g((function(e){return{user:e.user,logout:e.logout}})),t=e.user,n=e.logout;return Object(k.jsx)("header",{children:Object(k.jsx)(s.a,{bg:"dark",variant:"dark",expand:"sm",collapseOnSelect:!0,children:Object(k.jsxs)(i.a,{children:[Object(k.jsx)(l.LinkContainer,{to:"/",children:Object(k.jsx)(s.a.Brand,{children:"Proshop"})}),Object(k.jsx)(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(k.jsx)(s.a.Collapse,{id:"basic-navbar-nav",children:Object(k.jsxs)(o.a,{className:"ml-auto",children:[Object(k.jsx)(l.LinkContainer,{to:"/cart",children:Object(k.jsxs)(o.a.Link,{children:[Object(k.jsx)("i",{className:"fas fa-shopping-cart mr-1"}),"Cart"]})}),t?Object(k.jsxs)(j.a,{title:t.username,id:"username",children:[Object(k.jsx)(l.LinkContainer,{to:"/profile",children:Object(k.jsx)(j.a.Item,{children:"Profile"})}),Object(k.jsx)(j.a.Item,{onClick:n,children:"Logout"})]}):Object(k.jsx)(l.LinkContainer,{to:"/login",children:Object(k.jsxs)(o.a.Link,{children:[Object(k.jsx)("i",{className:"fas fa-user mr-1"}),"Sign In"]})})]})})]})})})}var y=n(116),I=n(73);function C(){var e=(new Date).getFullYear();return Object(k.jsx)("footer",{children:Object(k.jsx)(i.a,{children:Object(k.jsx)(y.a,{children:Object(k.jsxs)(I.a,{className:"text-center py-3",children:["Copyright \xa9 ",e," Proshop"]})})})})}var S=n(124),L=n(13);function N(e){var t=e.value,n=e.text,c=e.color,r=void 0===c?"#f8e825":c;return Object(k.jsxs)("div",{className:"flex flex-row",style:{width:"180px"},children:[Object(k.jsx)("i",{style:{color:r},className:" ".concat(t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star")}),Object(k.jsx)("i",{style:{color:r},className:" ".concat(t>=2?"fas fa-star":t>=1.5?"fas fa-star-half":"far fa-star")}),Object(k.jsx)("i",{style:{color:r},className:" ".concat(t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star")}),Object(k.jsx)("i",{style:{color:r},className:" ".concat(t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star")}),Object(k.jsx)("i",{style:{color:r},className:"".concat(t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star")}),Object(k.jsx)("span",{className:"ml-2",children:n})]})}function P(e){var t=e.product;return Object(k.jsxs)(S.a,{className:"my-3 p-3 rounded",children:[Object(k.jsx)(L.Link,{to:"/product/"+t._id,children:Object(k.jsx)(S.a.Img,{src:t.image,variant:"top"})}),Object(k.jsxs)(S.a.Body,{className:"mx-2",children:[Object(k.jsx)(L.Link,{to:"/product/"+t._id,children:Object(k.jsx)(S.a.Title,{children:Object(k.jsxs)("strong",{children:[" ",t.name]})})}),Object(k.jsx)(S.a.Text,{as:"div",children:Object(k.jsx)(N,{value:t.rating,text:"".concat(t.numReviews," reviews")})}),Object(k.jsxs)(S.a.Text,{as:"h3",children:["$",t.price]})]})]})}var E=n(117);function T(){return Object(k.jsx)(E.a,{animation:"border",role:"status",style:{width:"50px",height:"50px",margin:"30vh auto",display:"block"},children:Object(k.jsx)("span",{className:"sr-only",children:"Loading..."})})}var _=n(122);function F(e){var t=e.variant,n=e.children;return Object(k.jsx)(_.a,{variant:null!==t&&void 0!==t?t:"info",children:n})}var G=Object(f.combine)({productsList:Array(),loading:!1,error:"",product:null},(function(e){return{fetchProductList:function(){return Object(O.a)(b.a.mark((function t(){var n,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e((function(e){return Object(m.a)(e,(function(e){e.loading=!0,e.error=""}))})),t.next=4,p.a.get("/api/products");case 4:n=t.sent,c=n.data,e((function(e){return Object(m.a)(e,(function(e){e.loading=!1,e.productsList=c}))})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e((function(e){return Object(m.a)(e,(function(e){var n,c;e.loading=!1,e.error=(null===(n=t.t0.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||t.t0.message}))}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},fetchProduct:function(t){return Object(O.a)(b.a.mark((function n(){var c,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e((function(e){return Object(m.a)(e,(function(e){e.loading=!0,e.error=""}))})),n.next=4,p.a.get("/api/products/"+t);case 4:c=n.sent,r=c.data,e((function(e){return Object(m.a)(e,(function(e){e.loading=!1,e.product=r}))})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),e((function(e){return Object(m.a)(e,(function(e){var t,c;e.loading=!1,e.error=(null===(t=n.t0.response)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.message)||n.t0.message}))}));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()}}}));G=Object(f.devtools)(G,"ProductsStore"),"undefined"!=typeof window&&(G=Object(f.persist)(G,{name:"products"}));var A=Object(x.a)(G);function B(){var e=A(),t=e.loading,n=e.error,r=e.productsList,a=e.fetchProductList;return Object(c.useEffect)((function(){a()}),[a]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h1",{className:"mt-2",children:"Latest Products"}),t?Object(k.jsx)(T,{}):n?Object(k.jsx)(F,{variant:"danger",children:Object(k.jsx)("p",{children:n})}):Object(k.jsx)(y.a,{children:r.map((function(e){return Object(k.jsx)(I.a,{sm:12,md:6,lg:4,xl:3,children:Object(k.jsx)(P,{product:e})},"".concat(e._id))}))})]})}var U=n(8),D=n(50),R=n(14),q=n(118),$=n(125),J=n(120),Y=n(72),H=Object(f.combine)({cartItems:Array()},(function(e,t){return{addToCart:function(n,c){return Object(O.a)(b.a.mark((function r(){var a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t().cartItems.findIndex((function(e){return e.product._id===n._id})),e(-1==a?function(e){return Object(m.a)(e,(function(e){e.cartItems.push({product:n,qty:c})}))}:function(e){return Object(m.a)(e,(function(e){e.cartItems[a]=Object(u.a)(Object(u.a)({},e.cartItems[a]),{},{qty:c})}))});case 2:case"end":return r.stop()}}),r)})))()},removeItem:function(t){return Object(O.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e((function(e){return Object(m.a)(e,(function(e){e.cartItems=e.cartItems.filter((function(e){return e.product._id!=t}))}))}));case 1:case"end":return n.stop()}}),n)})))()}}}));H=Object(f.devtools)(H,"CartStore"),"undefined"!=typeof window&&(H=Object(f.persist)(H,{name:"cart"}));var Q=Object(x.a)(H);function z(){var e=Object(U.m)().id,t=Object(U.k)(),n=A(),r=n.loading,a=n.error,s=n.product,i=n.fetchProduct,o=Q().addToCart;Object(c.useEffect)((function(){i(e)}),[e,i]);var j=Object(c.useState)(1),l=Object(R.a)(j,2),u=l[0],d=l[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(L.Link,{to:"/",className:"btn btn-light my-2",children:"Go Back"}),r?Object(k.jsx)(T,{}):a?Object(k.jsx)(F,{variant:"danger",children:Object(k.jsx)("p",{children:a})}):s&&Object(k.jsxs)(y.a,{children:[Object(k.jsx)(I.a,{md:8,children:Object(k.jsx)(q.a,{src:s.image,alt:s.name,fluid:!0})}),Object(k.jsx)(I.a,{md:4,children:Object(k.jsxs)($.a,{variant:"flush",children:[Object(k.jsx)($.a.Item,{children:Object(k.jsx)("h3",{children:s.name})}),Object(k.jsx)($.a.Item,{children:Object(k.jsx)(N,{value:s.rating,text:"".concat(s.numReviews," reviews")})}),Object(k.jsxs)($.a.Item,{children:["Price: $",s.price]}),Object(k.jsx)($.a.Item,{children:Object(k.jsx)("p",{children:s.description})})]})}),Object(k.jsx)(I.a,{md:1}),Object(k.jsx)(I.a,{md:6,children:Object(k.jsxs)($.a,{children:[Object(k.jsxs)($.a.Item,{children:[Object(k.jsxs)(y.a,{children:[Object(k.jsx)(I.a,{children:"Price:"}),Object(k.jsxs)(I.a,{children:["$",s.price]})]}),Object(k.jsxs)(y.a,{children:[Object(k.jsx)(I.a,{children:"Status:"}),Object(k.jsx)(I.a,{children:s.countInStock>0?"In Stock":"Out of Stock"})]})]}),s.countInStock>0&&Object(k.jsx)($.a.Item,{children:Object(k.jsxs)(y.a,{className:"align-items-center",children:[Object(k.jsx)(I.a,{children:"Quantity"}),Object(k.jsx)(I.a,{children:Object(k.jsx)(J.a.Control,{as:"select",value:u,onChange:function(e){return d(Number(e.target.value))},children:Object(D.a)(Array(s.countInStock).keys()).map((function(e){return Object(k.jsx)("option",{children:e+1},e)}))})})]})}),Object(k.jsx)($.a.Item,{children:Object(k.jsx)(Y.a,{className:"btn-block",type:"button",disabled:s.countInStock<1,onClick:function(){s&&o(s,u),t.push("/cart/"+e)},children:"Add To Cart"})})]})})]})]})}function K(){var e=Q(),t=e.cartItems,n=e.addToCart,c=e.removeItem;return Object(k.jsxs)(y.a,{children:[Object(k.jsxs)(I.a,{md:8,children:[Object(k.jsx)("h1",{children:"Shopping Cart"}),t.length?Object(k.jsx)($.a,{variant:"flush",children:t.map((function(e){var t=e.product,r=e.qty;return Object(k.jsx)($.a.Item,{children:Object(k.jsxs)(y.a,{className:"align-items-center",children:[Object(k.jsx)(I.a,{xs:3,className:"pr-2",children:Object(k.jsx)(q.a,{src:t.image,alt:t.name,fluid:!0,rounded:!0})}),Object(k.jsx)(I.a,{className:"px-0",xs:4,children:Object(k.jsx)(L.Link,{to:"/product/"+t._id,children:t.name})}),Object(k.jsx)(I.a,{className:"px-0",xs:1,children:t.price}),Object(k.jsx)(I.a,{xs:3,children:Object(k.jsx)(J.a.Control,{as:"select",value:r,onChange:function(e){return n(t,Number(e.target.value))},children:Object(D.a)(Array(t.countInStock).keys()).map((function(e){return Object(k.jsx)("option",{children:e+1},e)}))})}),Object(k.jsx)(I.a,{xs:1,children:Object(k.jsx)(Y.a,{className:"px-0",type:"button",variant:"light",onClick:function(){return c(t._id)},children:Object(k.jsx)("i",{className:"fas fa-trash"})})})]})},t._id)}))}):Object(k.jsx)(F,{children:Object(k.jsxs)("p",{children:["You Cart is empty ",Object(k.jsx)(L.Link,{to:"/",children:"Go Back"})]})})]}),Object(k.jsx)(I.a,{md:4})]})}function M(e){var t=e.children;return Object(k.jsx)(i.a,{children:Object(k.jsx)(y.a,{className:"justify-content-md-center",children:Object(k.jsx)(I.a,{xs:12,md:6,children:t})})})}function V(){var e=Object(c.useState)(""),t=Object(R.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(R.a)(a,2),i=s[0],o=s[1],j=Object(c.useState)(""),l=Object(R.a)(j,2),u=l[0],d=l[1],x=Object(c.useState)(!1),h=Object(R.a)(x,2),p=h[0],f=h[1],m=g(),v=m.loginUser,w=m.user;function C(){return(C=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!0),e.t0=d,e.next=5,v(n,i);case 5:e.t1=e.sent,(0,e.t0)(e.t1),f(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=Object(U.l)().search,N=S?S.split("=")[1]:"/",P=Object(U.k)();return Object(c.useEffect)((function(){w&&P.push(N)}),[w,N,P]),Object(k.jsxs)(M,{children:[Object(k.jsx)("br",{}),p&&Object(k.jsx)(T,{}),u&&Object(k.jsx)(F,{variant:"danger",children:u}),Object(k.jsx)("h1",{children:"Sign In"}),Object(k.jsx)("br",{}),Object(k.jsxs)(J.a,{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(k.jsxs)(J.a.Group,{controlId:"email",children:[Object(k.jsx)(J.a.Label,{children:"Email Address"}),Object(k.jsx)(J.a.Control,{type:"email",placeholder:"Enter email",value:n,onChange:function(e){return r(e.target.value)}})]})," ",Object(k.jsxs)(J.a.Group,{controlId:"password",children:[Object(k.jsx)(J.a.Label,{children:"Password"}),Object(k.jsx)(J.a.Control,{type:"password",placeholder:"Enter password",value:i,onChange:function(e){return o(e.target.value)}})]}),Object(k.jsx)(Y.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(k.jsx)(y.a,{className:"py-3",children:Object(k.jsxs)(I.a,{children:["New Customer?"," ",Object(k.jsx)(L.Link,{to:"/register".concat(N?"?redirect=".concat(N):""),children:"Register"})]})})]})}function W(){var e=Object(c.useState)(""),t=Object(R.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(R.a)(a,2),i=s[0],o=s[1],j=Object(c.useState)(""),l=Object(R.a)(j,2),u=l[0],d=l[1],x=Object(c.useState)(""),h=Object(R.a)(x,2),p=h[0],f=h[1],m=Object(c.useState)(""),v=Object(R.a)(m,2),w=v[0],C=v[1],S=Object(c.useState)(!1),N=Object(R.a)(S,2),P=N[0],E=N[1],_=g(),G=_.registerUser,A=_.user;function B(){return(B=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n&&i&&u){e.next=5;break}C("Invalid Form Data"),e.next=16;break;case 5:if(u===p){e.next=9;break}C("Passwords do not match"),e.next=16;break;case 9:return E(!0),e.t0=C,e.next=13,G(n,i,u);case 13:e.t1=e.sent,(0,e.t0)(e.t1),E(!1);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=Object(U.l)().search,q=D?D.split("=")[1]:"/",$=Object(U.k)();return Object(c.useEffect)((function(){A&&$.push(q)}),[A,q,$]),Object(k.jsxs)(M,{children:[Object(k.jsx)("br",{}),P&&Object(k.jsx)(T,{}),w&&Object(k.jsx)(F,{variant:"danger",children:w}),Object(k.jsx)("h1",{children:"Sign In"}),Object(k.jsx)("br",{}),Object(k.jsxs)(J.a,{onSubmit:function(e){return B.apply(this,arguments)},children:[Object(k.jsxs)(J.a.Group,{controlId:"email",children:[Object(k.jsx)(J.a.Label,{children:"Username"}),Object(k.jsx)(J.a.Control,{type:"text",placeholder:"Enter your name",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(k.jsxs)(J.a.Group,{controlId:"email",children:[Object(k.jsx)(J.a.Label,{children:"Email Address"}),Object(k.jsx)(J.a.Control,{type:"email",placeholder:"Enter email",value:i,onChange:function(e){return o(e.target.value)}})]}),Object(k.jsxs)(J.a.Group,{controlId:"password",children:[Object(k.jsx)(J.a.Label,{children:"Password"}),Object(k.jsx)(J.a.Control,{type:"password",placeholder:"Enter password",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(k.jsxs)(J.a.Group,{controlId:"confirmPassword",children:[Object(k.jsx)(J.a.Label,{children:"Confirm Password"}),Object(k.jsx)(J.a.Control,{type:"password",placeholder:"Confirm password",value:p,onChange:function(e){return f(e.target.value)}})]}),Object(k.jsx)(Y.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(k.jsx)(y.a,{className:"py-3",children:Object(k.jsxs)(I.a,{children:["Have an account?"," ",Object(k.jsx)(L.Link,{to:"/login".concat(q?"?redirect=".concat(q):""),children:"Login"})]})})]})}function X(){return Object(k.jsxs)(L.BrowserRouter,{children:[Object(k.jsx)(w,{}),Object(k.jsx)("main",{children:Object(k.jsxs)(i.a,{fluid:"md",children:[Object(k.jsx)(U.d,{path:"/login",component:V}),Object(k.jsx)(U.d,{path:"/register",component:W}),Object(k.jsx)(U.d,{path:"/product/:id",component:z}),Object(k.jsx)(U.d,{path:"/cart/",exact:!0,component:K}),Object(k.jsx)(U.d,{path:"/cart/:productId",component:K}),Object(k.jsx)(U.d,{path:"/",component:B,exact:!0})]})}),Object(k.jsx)(C,{})]})}var Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(108),n(109);a.a.render(Object(k.jsx)(X,{}),document.getElementById("root")),Z()}},[[110,1,2]]]);
//# sourceMappingURL=main.8d795299.chunk.js.map